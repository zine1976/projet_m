{% extends 'base.html.twig' %}

{% block title %}{% endblock %}

{% block body %}


	<h1>{{produit.nom}}</h1>
	<div class="rowi">
		<div class="col-4">
			<a type="button" class="" data-bs-toggle="modal" data-bs-target="#exampleModal1">


				<img src="{{asset('uploads/' ~ produit.image) }}" alt="" class="img-fluid thumbnail">
			</a>
		</div>


		<!-- Modal -->
		<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-sm">
				<div class="modal-content">

					<div class="modal-body">

						<img src="{{asset('uploads/' ~ produit.image) }}" alt="" class="imgmod img-fluid thumbnail">
					</div>

				</div>
			</div>
		</div>
		{# modalfin #}
		<div class="col-4">
			<dl>

				<dt>Nom</dt>
				<dd>{{produit.nom}}</dd>

				<dt>stock</dt>
				<dd>{{produit.stock}}</dd>

				<dt>Prix</dt>
				<dd>{{produit.prix}}
					&nbsp;€</dd>

				<dt>Ajouter au panier</dt>
				<dd></dd>
				{% if app.user and produit.stock > 0 %}
					<td>
						<form action="{{ path('add_panier', {'id' : produit.id}) }}" method="post">
							<input type="number" name="qtte" id="qtte" min="1" max="{{produit.stock}}" step="1" placeholder="Quantité" style="max-width: 50px;" value="1">
							<button type="submit" class="btn btn-primary">
								<i class="fa fa-shopping-cart" aria-hidden="true"></i>
							</button>
						</form>
					</td>
				{% elseif app.user and produit.stock == 0 %}
					<td class="text-danger">Rupture de stock</td>
				{% endif %}
			</dl>

		</div>
		<div
			class="col-4">
			{# debut liste #}
			<div class="list-group">
				<a href="#" class="list-group-item list-group-item-action">A simple default list group item</a>

				<a href="#" class="list-group-item list-group-item-action list-group-item-primary">A simple primary list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-secondary">A simple secondary list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-success">A simple success list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-danger">A simple danger list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-warning">A simple warning list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-info">A simple info list group item</a>
				<a href="#" class="list-group-item list-group-item-action list-group-item-light">A simple light list group item</a>
				<a href="{{path('app_pouf')}}" class="list-group-item list-group-item-action list-group-item-dark">Poufs</a>
			</div>
			{# fin de list #}

		</div>

	</div>

	<div class="tab2 accordion accordion-flush" id="accordionFlushExample">
		<div class="accordion-item">
			<h2 class="accordion-header" id="flush-headingOne">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseOne" aria-expanded="false" aria-controls="flush-collapseOne">
					<strong>Description</strong>
				</button>
			</h2>
			<div id="flush-collapseOne" class="accordion-collapse collapse" aria-labelledby="flush-headingOne" data-bs-parent="#accordionFlushExample">
				<div class="accordion-body">
					{{produit.description}}</div>
			</div>
		</div>
		<div class="accordion-item">
			<h2 class="accordion-header" id="flush-headingTwo">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwo" aria-expanded="false" aria-controls="flush-collapseTwo">
					<strong>Histoire</strong>
				</button>
			</h2>
			<div id="flush-collapseTwo" class="accordion-collapse collapse" aria-labelledby="flush-headingTwo" data-bs-parent="#accordionFlushExample">
				<div class="accordion-body">{{produit.histoire}}</div>
			</div>
		</div>
		<div class="accordion-item">
			<h2 class="accordion-header" id="flush-headingThree">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseThree" aria-expanded="false" aria-controls="flush-collapseThree">
					<strong>Utilisation</strong>
				</button>
			</h2>
			<div id="flush-collapseThree" class="accordion-collapse collapse" aria-labelledby="flush-headingThree" data-bs-parent="#accordionFlushExample">
				<div class="accordion-body">{{produit.utilisation}}</div>
			</div>
		</div>
	</div>
	<div class="tit">
		<h2>Vous aimerez aussi</h2>
	</div>
	<div class="surplus">

		<div class="surplus1">
			<a href="{{path('app_plateau')}}">
				<img src="{{ asset("uploads/0c547fa49f49c8e3aa48be0e7b4e322c41e1a4a5.jpg")}}" class="card-img-top" alt="..."></a>
		</div>
		<div class="surplus1">
			<a href="{{path('app_pouf')}}">
				<img src="{{ asset("poufrouge.jpg")}}" class="card-img-top" alt="..."></a>
		</div>
		<div class="surplus1">
			<a href="{{path('app_theiere')}}">
				<img src="{{ asset("uploads/11df291cf4ed4c2c751a6beb24092904b462f55e.jpg")}}" class="card-img-top" alt="..."></a>
		</div>
		<div class="surplus1">
			<a href="{{path('app_khol')}}">
				<img src="{{ asset("kholima.jpg")}}" class="card-img-top" alt="..."></a>
		</div>

	</div>
	 <div class="grix xs2 sm3 gutter-0 card">
			<div class="col-xs2 col-sm3">
				<h2>Liste des commentaires</h2>
				{% for comment in produit.comments %}
					{% if comment.parent == null %}
						<h3>Commentaire de {{comment.nickname}}</h3>
						<p>Publié le {{comment.createdAt|date("d/m/Y H:i") }}</p>
						<div>{{comment.content|raw}}</div>
						<p><a href="#ajout-commentaire" data-reply data-id="{{comment.id}}" class="btn primary press">Répondre</a></p>

						{# On affiche les réponses #}
						{% for reply in comment.replies %}
							<p>Réponse publiée par {{reply.nickname}} le {{reply.createdAt|date("d/m/Y H:i") }}</p>
							<div>{{reply.content|raw}}</div>
						{% endfor %}
					{% endif %}
				{% endfor %}
			</div>
			<div class="col-xs2 col-sm3" id="ajout-commentaire">
				<h2>Ajouter un commentaire</h2>
				{{ form_start(commentForm) }}
				    {{ form_row(commentForm.nickname) }}
                    <p>Message</p>
                    <div id="editor"></div>
				{{ form_end(commentForm) }}
			</div>
		</div>

{% endblock %}
{% block javascripts %}
    // <script src="{{ asset('ckeditor5/ckeditor.js') }}"></script>
    <script src="{{ asset('js/CKEditor.js') }}"></script>
	<script>
		window.onload = () => {
			document.querySelector("#annonce_contact_title").value = "{{ annonce.title|raw }}";
			// On met un écouteur d'évènements sur tous les boutons répondre
			document.querySelectorAll("[data-reply]").forEach(element => {
				element.addEventListener("click", function(){
					document.querySelector("#comments_parentid").value = this.dataset.id;
				});
			});
		}
		// let caroulix = new Caroulix('#carousel');
		// let modal = new Modal('#modale-contact');
	</script>
{% endblock %}
